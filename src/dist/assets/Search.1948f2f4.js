var $=Object.defineProperty;var N=(t,e,r)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var b=(t,e,r)=>(N(t,typeof e!="symbol"?e+"":e,r),r);import{j as s,L as j,a,r as m,A}from"./index.052a2535.js";import{u as v}from"./useQuery.esm.8d8ed2ac.js";const D=async({queryKey:t})=>{const[,e]=t;return e?(await fetch(`http://pets-v2.dev-apis.com/breeds?animal=${e}`)).json():[]},L=t=>v(["breeds",t],D),w=t=>{const{name:e,animal:r,breed:i,images:o,location:c,id:d}=t;let l="http://pets-images.dev-apis.com/pets/none.jpg";return o.length&&(l=o[0]),s(j,{to:`/details/${d}`,className:"pet",children:[a("div",{className:"image-container",children:a("img",{src:l,alt:e})}),s("div",{className:"info",children:[a("h1",{children:e}),a("h2",{children:`${r} \u2014 ${i} \u2014 ${c}`})]})]})},y=({pets:t})=>a("div",{className:"search",children:t.length?t.map(e=>a(w,{id:e.id,name:e.name,animal:e.animal,breed:e.breed,images:e.images,location:`${e.city}, ${e.state}`},e.id)):a("h2",{children:"Search Doesn't Match Any Record"})}),C=async({queryKey:t})=>{const[,{animal:e,location:r,breed:i}]=t;return(await fetch(`http://pets-v2.dev-apis.com/pets?animal=${e}&location=${r}&breed=${i}`)).json()},E=t=>v(["search-pets",t],C);class F extends m.exports.Component{constructor(){super(...arguments);b(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(r,i){this.setState(r,i)}render(){return this.state.hasError?s("div",{children:[a("h1",{children:"Something went wrong."}),a("p",{children:this.state.error&&this.state.error.toString()})]}):this.props.children}}const P=["dog","bird","cat","reptile","rabbit"],R=()=>{var l,p,u,g;const[t,e]=m.exports.useState({location:"",animal:"",breed:""}),[r]=m.exports.useContext(A),i=L(t.animal),o=(p=(l=i==null?void 0:i.data)==null?void 0:l.breeds)!=null?p:[],c=E(t),d=(g=(u=c==null?void 0:c.data)==null?void 0:u.pets)!=null?g:[];return s("div",{className:"search-params",children:[s("form",{onSubmit:n=>{n.preventDefault();const h=new FormData(n.target),f=h.get("animal"),S=h.get("location"),x=h.get("breed");e({animal:f,location:S,breed:x})},children:[r&&s("div",{className:"pet",children:[a("h4",{children:r.name}),a("div",{className:"image-container",children:a("img",{src:r.images[0],alt:r.name})})]}),s("label",{htmlFor:"location",children:["Location",a("input",{type:"text",id:"location",placeholder:"location",name:"location"})]}),s("label",{htmlFor:"animal",children:["Animal",s("select",{id:"animal",name:"animal",onChange:n=>{e({...t,animal:n.target.value,breed:""})},children:[a("option",{}),P.map(n=>a("option",{value:n,children:n},n))]})]}),s("label",{htmlFor:"breed",children:["Breed",s("select",{id:"breed",disabled:!o.length,name:"breed",children:[a("option",{}),o.map(n=>a("option",{value:n,children:n},n))]})]}),a("button",{children:"Search"})]}),a(F,{children:a(y,{pets:d})})]})};export{R as default};
